import React, {useEffect, useRef} from 'react';

const Message = ({author, authorId, userData, message, status, getOffsetTop, messageId}) => {
    const messageRef = useRef(null)
    useEffect(() => {

        if (authorId !== userData.id && status === 'sent') {
            const offsetTop = messageRef.current.offsetTop
            const obj = {
                messageId,
                offsetTop
            }
            getOffsetTop(obj)

        }
    }, [authorId, getOffsetTop, messageId, status, userData.id])

    return (
        <div ref={messageRef} className={`dialog__item ${authorId === userData.id ? 'dialog__item-my' : ''}`}>
            <h4 className="dialog__item-name">{author}</h4>
            <div className="dialog__item-message">
                <p className="dialog__item-message-text">
                    {message}
                </p>
                <div className="dialog__item-message-flex">
                    <div className="dialog__item-message-status">
                        {status === 'read' ?
                            <svg id="Capa_1" fill='#6588de' enableBackground="new 0 0 512 512" height="15"
                                 viewBox="0 0 512 512" width="15" xmlns="http://www.w3.org/2000/svg">
                                <g>
                                    <path
                                        d="m473.074 120.729-203.295 203.296-21.212-21.212 153.765-153.764-38.926-38.926-153.765 153.765-61.047-61.047-38.926 38.926 61.047 61.047-21.211 21.211-110.578-110.577-38.926 38.926 149.503 149.503 60.138-60.137 60.137 60.137 242.222-242.221z"/>
                                </g>
                            </svg> : <svg version="1.1" width='15' fill='#6588de' height='15' id="Layer_1"
                                          xmlns="http://www.w3.org/2000/svg"
                                          xmlnsXlink="http://www.w3.org/1999/xlink" x="0px"
                                          y="0px"
                                          viewBox="0 0 512 512" style={{enableBackground: "new 0 0 512 512"}}
                                          xmlSpace="preserve">
                                <g>
                                    <g>
                                        <path d="M504.502,75.496c-9.997-9.998-26.205-9.998-36.204,0L161.594,382.203L43.702,264.311c-9.997-9.998-26.205-9.997-36.204,0
                       c-9.998,9.997-9.998,26.205,0,36.203l135.994,135.992c9.994,9.997,26.214,9.99,36.204,0L504.502,111.7
                       C514.5,101.703,514.499,85.494,504.502,75.496z"/>
                                    </g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                            </svg>}

                    </div>
                    <p className="dialog__item-message-time">15:03</p>
                </div>
            </div>
        </div>
    );
};

export default Message;


// <div className="dialog__item dialog__item-my">
//     <h4 className="dialog__item-name">Mehmet Revnaki</h4>
//     <div className="dialog__item-message">
//                   <span className="dialog__item-message-text">
//                     I have send the files
//                   </span>
//         <div className="dialog__item-message-flex">
//             <div className="dialog__item-message-status">
//                 <svg id="Capa_1" fill='#6588de' enableBackground="new 0 0 512 512" height="15"
//                      viewBox="0 0 512 512" width="15" xmlns="http://www.w3.org/2000/svg">
//                     <g>
//                         <path
//                             d="m473.074 120.729-203.295 203.296-21.212-21.212 153.765-153.764-38.926-38.926-153.765 153.765-61.047-61.047-38.926 38.926 61.047 61.047-21.211 21.211-110.578-110.577-38.926 38.926 149.503 149.503 60.138-60.137 60.137 60.137 242.222-242.221z"/>
//                     </g>
//                 </svg>
//             </div>
//             <p className="dialog__item-message-time">15:03</p>
//         </div>
//     </div>
// </div>